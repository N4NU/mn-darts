{% extends "base.html" %}
{% block content %}

<div class="container">
  <h3>カウントアップ</h3>

  <div class="row">
    <div class="col-md-12">

      <table id="ranking" class="table table-striped">
        <thead>
          <tr>
            <td class="col-xs-1"><b>Rd.</b></td>
            <td class="col-xs-3"><b>1st</b></td>
            <td class="col-xs-3"><b>2nd</b></td>
            <td class="col-xs-3"><b>3rd</b></td>
          </tr>
        </thead>
        <tbody>
      {% for n in range(8) %}
        <tr>
          <td class="col-xs-1">{{ n + 1 }}</td>
          <td class="col-xs-3">
            <div class="row">
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-0">
                  <option value="0">-</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="25">bull</option>
                </select>
              </div>
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-1">
                  <option value="1">single</option>
                  <option value="2">double</option>
                  <option value="3">triple</option>
                </select>
              </div>
            </div>
          </td>
          <td class="col-xs-3">
            <div class="row">
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-2">
                  <option value="0">-</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="25">bull</option>
                </select>
              </div>
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-3">
                  <option value="1">single</option>
                  <option value="2">double</option>
                  <option value="3">triple</option>
                </select>
              </div>
            </div>
          </td>
          <td class="col-xs-3">
            <div class="row">
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-4">
                  <option value="0">-</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="25">bull</option>
                </select>
              </div>
              <div class="col-md-6">
                <select style="padding: 0px 0px 0px 1px;" class="form-control" id="dart-{{ n }}-5">
                  <option value="1">single</option>
                  <option value="2">double</option>
                  <option value="3">triple</option>
                </select>
              </div>
            </div>
          </td>
        </tr>
      {% endfor %}
        </tbody>
      </table>
      <form method="post" name="submit_form" id="submit_form">
        <input class="btn btn-primary" type="submit" name="btn" id="btn" value="投稿する" onclick="submit_func();">
        <input type="hidden" id="round_data" name="round_data" value="">
      </form>
    </div>
  </div>
</div>

<script type="text/javascript"> 

for (var y = 0; y < 8; y++) {
  for (var x = 0; x < 6; x += 2) {
    eval('$("' + 'select#dart-' + y + '-' + x + '").change(function(){if($(this).val() == "25"){$("select#dart-' + y + '-' + (x + 1) + ' option[value=\'3\']").attr("disabled", "disabled");$("select#dart-' + y + '-' + (x + 1) + '").val("1");} else {$("select#dart-' + y + '-' + (x + 1) + ' option[value=\'3\']").removeAttr("disabled");}});');
  }
}

function submit_func() {
  var l = [];
  for (var y = 0; y < 8; y++) {
    for (var x = 0; x < 6; x++) {
      l.push($("select#dart-" + y + "-" + x).val());
    }
  }
  $("#round_data").val(l.join(','));
  document.submit_form.submit();
}

</script>

{% endblock %}